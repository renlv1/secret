webpackJsonp([29],{"+0qn":function(t,e){},aYyo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),o={data:function(){return{codeValue:"+86",areaCodeNum:"86",codeSelectShow:!1,areaCodeData:[],phoneNum:"",phoneNumTipShow:!1,vCode:"",vCodeTipShow:!1,sendBtnTimes:60,successShow:!1}},mounted:function(){var t=this;this.$nextTick(function(){document.addEventListener("click",t.closeCodeMenu),t.getAreaCode()})},destroyed:function(){document.removeEventListener("click",this.closeCodeMenu)},methods:{closeCodeMenu:function(t){this.$refs.discountBtn.contains(t.target)||(this.codeSelectShow=!1)},getAreaCode:function(){var t=this,e=Date.parse(new Date);this.$http.post(this.$api+"/app/globalParam?lastUpdateDate="+e).then(function(e){e.data.success&&(t.areaCodeData=e.data.data.phonecode.cn)}).catch(function(t){console.log(t)})},chooseCode:function(t){this.areaCodeNum=t,this.codeValue="+"+t,this.codeSelectShow=!1},countDown:function(){var t=this;0===this.sendBtnTimes?(this.$refs.sendMsg.innerHTML=this.$t("bindPhone.text8"),this.sendBtnTimes=60,this.$refs.sendMsg.style.color="rgba(201,0,16)",this.$refs.sendMsg.disabled=!1):(this.sendBtnTimes--,this.$refs.sendMsg.innerHTML=this.sendBtnTimes,this.$refs.sendMsg.disabled=!0,this.$refs.sendMsg.style.color="rgba(255,255,255,0.6)",setTimeout(function(){return t.countDown()},1e3))},sendPhoneCode:function(){var t=this;if(""===this.phoneNum)this.phoneNumTipShow=!0;else{var e=void 0,s=new FormData;s.append("json",i()({type:"register",mobile:this.phoneNum,phoneCode:this.areaCodeNum})),this.$http.post(this.$api+"/user/sendSmsCode",s).then(function(s){e=s.data.success?t.$t("bindPhone.text13"):s.data.msg,t.$store.dispatch("errAction",{bool:!0,msg:e})}).catch(function(t){console.log(t)})}this.countDown()},completeFun:function(){var t=this;if(""===this.phoneNum)this.phoneNumTipShow=!0;else if(""===this.vCode)this.vCodeTipShow=!0;else{var e=new FormData;e.append("phonecode",this.areaCodeNum),e.append("phone",this.phoneNum),e.append("code",this.vCode),this.$http.post(this.$api+"/user/modifyUserInfo",e).then(function(e){e.data.success?(t.sendBtnTimes=0,t.successShow=!0):t.$store.dispatch("errAction",{bool:!0,msg:t.$t("bindPhone.text14")})}).catch(function(t){console.log(t)})}},closeSuccessPopup:function(){this.successShow=!1,this.$router.go(-1)}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bindPhone secret-wrap"},[n("a",{staticClass:"secret-back",on:{click:function(e){return t.$router.go(-1)}}},[n("img",{attrs:{src:s("n5Zd"),alt:""}}),t._v(t._s(t.$t("bindPhone.text1")))]),t._v(" "),n("div",{staticClass:"secret-wrap-ct"},[n("h3",{staticClass:"title"},[t._v(t._s(t.$t("bindPhone.text2")))]),t._v(" "),n("div",{staticClass:"inputTipBox inputTipBox-select"},[n("div",{staticClass:"inputTip-title"},[n("span",[n("i",[t._v("1.")]),t._v(t._s(t.$t("bindPhone.text3"))+"：")])]),t._v(" "),n("div",{staticClass:"inputTipDiv"},[n("input",{staticClass:"secret-input secret-input-bordernone select-input",attrs:{type:"text",readonly:"",disabled:"",placeholder:t.codeValue}}),t._v(" "),n("a",{ref:"discountBtn",staticClass:"discount-btn",on:{click:function(e){t.codeSelectShow=!t.codeSelectShow}}},[n("i",{staticClass:"arrowDown",class:{arrowActive:t.codeSelectShow}})]),t._v(" "),n("ul",{staticClass:"selectMenu",class:{selectMenuActive:t.codeSelectShow}},t._l(t.areaCodeData,function(e,s){return n("li",{key:s,on:{click:function(n){return t.chooseCode(e.code,s)}}},[t._v(t._s(e.value))])}),0)])]),t._v(" "),n("div",{staticClass:"inputTipBox",staticStyle:{"z-index":"0"}},[n("div",{staticClass:"inputTip-title"},[n("span",[n("i",[t._v("2.")]),t._v(t._s(t.$t("bindPhone.text4"))+"：")])]),t._v(" "),n("div",{staticClass:"inputTipDiv"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.phoneNum,expression:"phoneNum",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"text",placeholder:t.$t("bindPhone.text5")},domProps:{value:t.phoneNum},on:{focus:function(e){t.phoneNumTipShow=!1},input:function(e){e.target.composing||(t.phoneNum=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.phoneNumTipShow}},[t._v(t._s(t.$t("bindPhone.text5")))])]),t._v(" "),n("div",{staticClass:"inputTipBox"},[n("div",{staticClass:"inputTip-title"},[n("span",[n("i",[t._v("3.")]),t._v(t._s(t.$t("bindPhone.text6"))+"：")])]),t._v(" "),n("div",{staticClass:"inputTipDiv"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.vCode,expression:"vCode",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"text",placeholder:t.$t("bindPhone.text7")},domProps:{value:t.vCode},on:{focus:function(e){t.vCodeTipShow=!1},input:function(e){e.target.composing||(t.vCode=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("button",{ref:"sendMsg",staticClass:"secret-btn",on:{click:function(e){return t.sendPhoneCode()}}},[t._v(t._s(t.$t("bindPhone.text8")))])]),t._v(" "),n("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.vCodeTipShow}},[t._v(t._s(t.$t("bindPhone.text9")))])]),t._v(" "),n("button",{staticClass:"secret-btn complete-btn",on:{click:function(e){return t.completeFun()}}},[t._v(t._s(t.$t("bindPhone.text10")))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.successShow,expression:"successShow"}],staticClass:"myPopup"},[n("div",{staticClass:"myPopup-tip"},[n("h3",{staticClass:"title"},[t._v(t._s(t.$t("bindPhone.text11")))]),t._v(" "),n("button",{staticClass:"secret-btn",on:{click:function(e){return t.closeSuccessPopup()}}},[t._v(t._s(t.$t("bindPhone.text12")))])])])])},staticRenderFns:[]};var a=s("VU/8")(o,c,!1,function(t){s("+0qn")},"data-v-6b55a1f5",null);e.default=a.exports}});
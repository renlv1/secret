webpackJsonp([8],{PLFw:function(t,e){},bnAB:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),o=s.n(i),n=s("Dd8w"),a=s.n(n),c=s("NYxO"),p=s("vNvs"),u={data:function(){return{exchangeType:2,exchangeNum:"",exchangeNumTipShow:!1,inputTip:this.$t("couponExchange.text4"),verificationShow:!1,tradePasswordShow:!1,bindPhoneShow:!1,safePassword:"",safePasswordTipShow:!1,payCode:"",ggCodeTipShow:!1,phoneCodeTipShow:!1,sendBtnTimes:60,successShow:!1}},components:{vBreadcrumb:function(t){return s.e(51).then(function(){var e=[s("1JPr")];t.apply(null,e)}.bind(this)).catch(s.oe)}},mounted:function(){var t=this;this.$nextTick(function(){t.$route.query.type&&(t.exchangeType=parseInt(t.$route.query.type)),t.$store.dispatch("exchangeRatio")})},computed:a()({},Object(c.b)(["userInfo","aitotalAmount","sumtotalAmount","pkAmount","language","sieRatio"])),watch:{language:function(){this.inputTip=this.$t("couponExchange.text4")}},methods:{checkExchangeNum:function(){/^\d*\.{0,1}\d{0,1}$/.test(this.exchangeNum)||(this.exchangeNum=this.exchangeNum.substring(0,this.exchangeNum.length-1)),/^0\d+/.test(this.exchangeNum)&&(this.exchangeNum="0")},checkedCoupon:function(t){this.exchangeType=t,this.exchangeNumTipShow=!1},completeFun:function(){var t=this;2!==this.userInfo.openGoogleCode?Object(p.a)({msg:this.$t("buySie.text19"),okFn:function(){t.$router.push("/userAccount")}}):""===this.exchangeNum?this.exchangeNumTipShow=!0:parseFloat(this.exchangeNum)>this.aitotalAmount*this.sieRatio&&2===this.exchangeType?(this.exchangeNumTipShow=!0,this.inputTip=this.$t("couponExchange.text6")):parseFloat(this.exchangeNum)>this.sumtotalAmount*this.sieRatio&&1===this.exchangeType?(this.exchangeNumTipShow=!0,this.inputTip=this.$t("couponExchange.text6")):parseFloat(this.exchangeNum)>this.pkAmount*this.sieRatio&&3===this.exchangeType?(this.exchangeNumTipShow=!0,this.inputTip=this.$t("couponExchange.text6")):1===this.userInfo.openTradePassword?this.tradePasswordShow=!0:2===this.userInfo.openTradePassword&&(2!==this.userInfo.openMobileCode&&2!==this.userInfo.openGoogleCode?this.bindPhoneShow=!0:this.verificationShow=!0)},confirmBuy:function(){var t=this;if(""===this.safePassword&&(this.safePasswordTipShow=!0),""===this.payCode&&(2===this.userInfo.openGoogleCode?this.ggCodeTipShow=!0:this.phoneCodeTipShow=!0),""!==this.safePassword&&""!==this.payCode){var e=void 0,s=new FormData;s.append("amount",this.exchangeNum/.1),s.append("type",this.exchangeType),s.append("tradePwd",this.safePassword),s.append("code",this.payCode),this.$http.post("/userDiscount/discountToSie",s).then(function(s){s.data.success?(t.successShow=!0,t.$store.dispatch("balanceAction")):(e=s.data.msg,t.$store.dispatch("errAction",{bool:!0,msg:e}))}),this.verificationShow=!1,this.safePassword="",this.payCode="",this.sendBtnTimes=0}},countDown:function(){var t=this;0===this.sendBtnTimes?(this.$refs.sendMsg.innerHTML=this.$t("buySie.text17"),this.sendBtnTimes=60,this.$refs.sendMsg.style.color="rgba(201,0,16)",this.$refs.sendMsg.disabled=!1):(this.sendBtnTimes--,this.$refs.sendMsg.innerHTML=this.sendBtnTimes,this.$refs.sendMsg.disabled=!0,this.$refs.sendMsg.style.color="rgba(255,255,255,0.6)",setTimeout(function(){return t.countDown()},1e3))},sendPhoneCode:function(){var t=this,e=void 0,s=new FormData;s.append("json",o()({type:"code"})),this.$http.post(this.$api+"/user/sendSmsCode",s).then(function(s){e=s.data.success?t.$t("buySie.text16"):s.data.msg,t.$store.dispatch("errAction",{bool:!0,msg:e})}).catch(function(t){console.log(t)}),this.countDown()}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"couponExchange secret-content66"},[i("v-breadcrumb",{attrs:{breadcrumbList:t.$t("couponExchange.breadcrumbList")}}),t._v(" "),i("ul",{staticClass:"secret-list"},[i("li",{on:{click:function(e){return t.checkedCoupon(2)}}},[i("div",{staticClass:"li-lf"},[i("h3",{staticClass:"title"},[t._v(t._s(t.$t("couponExchange.text1"))+"：")]),t._v(" "),i("p",[t._v(t._s(t._f("fourNumber")(t.aitotalAmount)))])]),t._v(" "),i("div",{staticClass:"li-rt"},[i("a",{staticClass:"copy-btn",class:{checked:2===t.exchangeType}})])]),t._v(" "),i("li",{on:{click:function(e){return t.checkedCoupon(1)}}},[i("div",{staticClass:"li-lf"},[i("h3",{staticClass:"title"},[t._v(t._s(t.$t("couponExchange.text2"))+"：")]),t._v(" "),i("p",[t._v(t._s(t._f("fourNumber")(t.sumtotalAmount)))])]),t._v(" "),i("div",{staticClass:"li-rt"},[i("a",{staticClass:"copy-btn",class:{checked:1===t.exchangeType}})])]),t._v(" "),i("li",{on:{click:function(e){return t.checkedCoupon(3)}}},[i("div",{staticClass:"li-lf"},[i("h3",{staticClass:"title"},[t._v(t._s(t.$t("coupon.text13"))+"：")]),t._v(" "),i("p",[t._v(t._s(t._f("fourNumber")(t.pkAmount)))])]),t._v(" "),i("div",{staticClass:"li-rt"},[i("a",{staticClass:"copy-btn",class:{checked:3===t.exchangeType}})])])]),t._v(" "),i("div",{staticClass:"inputTipBox couponExchange-inputTipBox"},[i("div",{staticClass:"inputTip-title"},[2===t.exchangeType?i("span",[t._v(t._s(t.$t("couponExchange.text3"))+t._s(t._f("fourNumber")(t.aitotalAmount*t.sieRatio))+" SIE）")]):t._e(),t._v(" "),1===t.exchangeType?i("span",[t._v(t._s(t.$t("couponExchange.text3"))+t._s(t._f("fourNumber")(t.sumtotalAmount*t.sieRatio))+" SIE）")]):t._e(),t._v(" "),3===t.exchangeType?i("span",[t._v(t._s(t.$t("couponExchange.text3"))+t._s(t._f("fourNumber")(t.pkAmount*t.sieRatio))+" SIE）")]):t._e()]),t._v(" "),i("div",{staticClass:"inputTipDiv inputTipDiv-flex"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.exchangeNum,expression:"exchangeNum",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"number",placeholder:t.$t("couponExchange.text4")},domProps:{value:t.exchangeNum},on:{input:[function(e){e.target.composing||(t.exchangeNum=e.target.value.trim())},function(e){return t.checkExchangeNum()}],focus:function(e){t.exchangeNumTipShow=!1},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.exchangeNumTipShow}},[t._v(t._s(t.inputTip))])]),t._v(" "),i("button",{staticClass:"secret-btn couponExchange-btn",on:{click:function(e){return t.completeFun()}}},[t._v(t._s(t.$t("couponExchange.text5")))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.tradePasswordShow,expression:"tradePasswordShow"}],staticClass:"myPopup"},[i("div",{staticClass:"myPopup-tip"},[i("a",{staticClass:"close-btn",on:{click:function(e){t.tradePasswordShow=!1}}},[i("img",{attrs:{src:s("KOGE"),alt:""}})]),t._v(" "),i("h3",{staticClass:"title"},[t._v(t._s(t.$t("popoup.text1")))]),t._v(" "),i("p",{staticClass:"subtitle"},[t._v(t._s(t.$t("popoup.text2")))]),t._v(" "),i("router-link",{staticClass:"secret-btn",attrs:{tag:"button",to:"/safeSetting"}},[t._v(t._s(t.$t("popoup.text3")))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.bindPhoneShow,expression:"bindPhoneShow"}],staticClass:"myPopup"},[i("div",{staticClass:"myPopup-tip"},[i("a",{staticClass:"close-btn",on:{click:function(e){t.bindPhoneShow=!1}}},[i("img",{attrs:{src:s("KOGE"),alt:""}})]),t._v(" "),i("h3",{staticClass:"title"},[t._v(t._s(t.$t("popoup.text4")))]),t._v(" "),i("router-link",{staticClass:"secret-btn",attrs:{tag:"button",to:"/bindPhone"}},[t._v(t._s(t.$t("popoup.text5")))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.verificationShow,expression:"verificationShow"}],staticClass:"myPopup verificationPopup"},[i("div",{staticClass:"myPopupBox"},[i("div",{staticClass:"verificationForm"},[i("h3",{staticClass:"secret-title"},[t._v(t._s(t.$t("popoup.text6")))]),t._v(" "),i("div",{staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text7")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.safePassword,expression:"safePassword",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"password",placeholder:t.$t("popoup.text8")},domProps:{value:t.safePassword},on:{focus:function(e){t.safePasswordTipShow=!1},input:function(e){e.target.composing||(t.safePassword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.safePasswordTipShow}},[t._v(t._s(t.$t("popoup.text8")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.userInfo.openGoogleCode,expression:"userInfo.openGoogleCode === 2"}],staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text9")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.payCode,expression:"payCode",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"text",placeholder:t.$t("popoup.text10")},domProps:{value:t.payCode},on:{focus:function(e){t.ggCodeTipShow=!1},input:function(e){e.target.composing||(t.payCode=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.ggCodeTipShow}},[t._v(t._s(t.$t("popoup.text10")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.userInfo.openGoogleCode&&2===t.userInfo.openMobileCode,expression:"userInfo.openGoogleCode !== 2 && userInfo.openMobileCode === 2"}],staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text11")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.payCode,expression:"payCode",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"password",placeholder:t.$t("popoup.text12")},domProps:{value:t.payCode},on:{focus:function(e){t.phoneCodeTipShow=!1},input:function(e){e.target.composing||(t.payCode=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),i("button",{ref:"sendMsg",staticClass:"secret-btn",on:{click:function(e){return t.sendPhoneCode()}}},[t._v(t._s(t.$t("popoup.text13")))])]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.phoneCodeTipShow}},[t._v(t._s(t.$t("popoup.text12")))])])]),t._v(" "),i("div",{staticClass:"popupBtn"},[i("button",{staticClass:"secret-btn",on:{click:function(e){t.verificationShow=!1}}},[t._v(t._s(t.$t("popoup.text14")))]),t._v(" "),i("button",{staticClass:"secret-btn",on:{click:function(e){return t.confirmBuy()}}},[t._v(t._s(t.$t("popoup.text15")))])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.successShow,expression:"successShow"}],staticClass:"myPopup"},[i("div",{staticClass:"myPopup-tip"},[i("a",{staticClass:"close-btn",on:{click:function(e){t.successShow=!1}}},[i("img",{attrs:{src:s("KOGE"),alt:""}})]),t._v(" "),i("h3",{staticClass:"title"},[t._v(t._s(t.$t("couponExchange.text7")))]),t._v(" "),i("router-link",{staticClass:"secret-btn",attrs:{tag:"button",to:"/home/coupon"}},[t._v(t._s(t.$t("popoup.text15")))])],1)])],1)},staticRenderFns:[]};var h=s("VU/8")(u,r,!1,function(t){s("PLFw")},"data-v-d08b7cc6",null);e.default=h.exports}});
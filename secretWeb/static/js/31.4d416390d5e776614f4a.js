webpackJsonp([31],{SYJz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),o=s.n(i),n=s("Dd8w"),a=s.n(n),u=s("NYxO"),c=s("vNvs"),r=s("Icdr");s("9cSo");var d={data:function(){return{kLineData:[],buyNum:"",buyNumTipShow:!1,buyNumTip:this.$t("buySie.text6"),discount:{discountSelectShow:!1,discountValue:this.$t("buySie.text11"),discountSelectIndex:0,discountSelectList:[{name:this.$t("buySie.text11")},{name:this.$t("buySie.text12")},{name:this.$t("buySie.text13")},{name:this.$t("buySie.text18")}]},verificationShow:!1,tradePasswordShow:!1,bindPhoneShow:!1,safePassword:"",safePasswordTipShow:!1,payCode:"",ggCodeTipShow:!1,phoneCodeTipShow:!1,sendBtnTimes:60}},watch:{language:function(){this.discount.discountSelectList[0].name=this.$t("buySie.text11"),this.discount.discountSelectList[1].name=this.$t("buySie.text12"),this.discount.discountSelectList[2].name=this.$t("buySie.text13"),this.discount.discountSelectList[3].name=this.$t("buySie.text18"),this.discount.discountValue=this.discount.discountSelectList[this.discount.discountSelectIndex].name}},computed:a()({},Object(u.b)(["balanceData","userBalanceUSD","language","discountPreferential","userInfo"]),{discountPrice:function(){return"{}"===o()(this.discountPreferential)?0:this.discountPreferential.aitotal&&1===this.discount.discountSelectIndex?this.discountPreferential.aitotal.amount:this.discountPreferential.sumtotal&&2===this.discount.discountSelectIndex?this.discountPreferential.sumtotal.amount:this.discountPreferential.pkAmount&&3===this.discount.discountSelectIndex?this.discountPreferential.pkAmount.amount:0},tradTotalPrice:function(){if(""===this.buyNum.trim())return 0;if(0===this.discountPrice)return this.balanceData.siePrice*parseFloat(this.buyNum);if(1===this.discount.discountSelectIndex){if(this.discountPreferential.aitotal){var t=this.discountPreferential.aitotal.amount;return this.buyNum>t?(this.buyNum-t)*this.balanceData.siePrice+t*this.balanceData.siePrice*.9:this.buyNum*this.balanceData.siePrice*.9}}else{if(2===this.discount.discountSelectIndex){var e=this.discountPreferential.sumtotal.amount;return this.buyNum>e?(this.buyNum-e)*this.balanceData.siePrice+e*this.balanceData.siePrice*.9:this.buyNum*this.balanceData.siePrice*.9}if(3===this.discount.discountSelectIndex){var s=this.discountPreferential.pkAmount.amount;return this.buyNum>s?(console.log((this.buyNum-s)*this.balanceData.siePrice+s*this.balanceData.siePrice*.9),(this.buyNum-s)*this.balanceData.siePrice+s*this.balanceData.siePrice*.9):this.buyNum*this.balanceData.siePrice*.9}}}}),mounted:function(){var t=this;this.$nextTick(function(){t.getLineData(),document.addEventListener("click",t.closeDiscountMenu)})},destroyed:function(){document.removeEventListener("click",this.closeDiscountMenu)},methods:{checkBuyNum:function(){/^\d*\.{0,1}\d{0,4}$/.test(this.buyNum)||(this.buyNum=this.buyNum.substring(0,this.buyNum.length-1)),parseInt(this.buyNum)*this.balanceData.siePrice>this.userBalanceUSD&&0!==this.userBalanceUSD?this.buyNum=this.buyNum.substring(0,this.buyNum.length-1):0===this.userBalanceUSD&&(this.buyNum="")},splitData:function(t){for(var e=[],s=[],i=0;i<t.length;i++)e.push(t[i].splice(0,1)[0]),s.push(t[i]);return{categoryData:e,values:s}},calculateMA:function(t){for(var e=[],s=0,i=this.kLineData.values.length;s<i;s++)if(s<t)e.push("-");else{for(var o=0,n=0;n<t;n++)o+=this.kLineData.values[s-n][1];e.push(o/t)}return e},drawLine:function(){r.init(document.getElementById("myChart")).setOption({grid:{top:"5%",left:"5%",right:"5%",bottom:"10%"},xAxis:{data:this.kLineData.categoryData,axisLine:{lineStyle:{color:"#373C52",width:1}}},yAxis:{scale:!0,splitLine:{lineStyle:{color:"#292d3d",width:1}},axisLine:{lineStyle:{color:"#373C52",width:1}}},dataZoom:[{type:"inside",start:80,end:100}],series:[{type:"candlestick",data:this.kLineData.values,itemStyle:{normal:{color:"#c31739",color0:"#28d7a8",borderColor:"#c31739",borderColor0:"#28d7a8"}}}]})},getLineData:function(){var t=this;this.$http.post(this.$api+"/tradeline/queryTradeKLine?type=2").then(function(e){if(e.data.success){var s=[];e.data.data.forEach(function(e){var i=[];i.push(t.$changeDate(e.startTime,".",4)),i.push(e.openPrice),i.push(e.closePrice),i.push(e.lowPrice),i.push(e.highPrice),i.push(e.volume),s.push(i)}),s=s.reverse(),t.kLineData=t.splitData(s),t.drawLine()}}).catch(function(t){console.log(t)})},closeDiscountMenu:function(t){this.$refs.discountBtn.contains(t.target)||(this.discount.discountSelectShow=!1)},chooseDiscount:function(t,e){this.discount.discountValue=t,this.discount.discountSelectShow=!1,this.discount.discountSelectIndex=e},buyFuc:function(){var t=this;2!==this.userInfo.openGoogleCode?Object(c.a)({msg:this.$t("buySie.text19"),okFn:function(){t.$router.push("/userAccount")}}):""===this.buyNum.trim()?(this.buyNumTipShow=!0,this.buyNumTip=this.$t("buySie.text6")):parseFloat(this.buyNum)<.1?(this.buyNumTipShow=!0,this.buyNumTip=this.$t("buySie.text14")):1===this.userInfo.openTradePassword?this.tradePasswordShow=!0:2===this.userInfo.openTradePassword&&(2!==this.userInfo.openMobileCode&&2!==this.userInfo.openGoogleCode?this.bindPhoneShow=!0:this.verificationShow=!0)},confirmBuy:function(){var t=this;if(""===this.safePassword&&(this.safePasswordTipShow=!0),""===this.payCode&&(2===this.userInfo.openGoogleCode?this.ggCodeTipShow=!0:this.phoneCodeTipShow=!0),""!==this.safePassword&&""!==this.payCode){if(0===this.discountPrice){var e=new FormData;e.append("buyAmount",this.buyNum),e.append("tradePwd",this.safePassword),e.append("code",this.payCode),this.$http.post(this.$api+"/tradesie/buySieTrade",e).then(function(e){e.data.success?(t.$store.dispatch("errAction",{bool:!0,msg:t.$t("buySie.text15")}),t.buyNum="",t.$store.dispatch("balanceAction")):t.$store.dispatch("errAction",{bool:!0,msg:e.data.msg})}).catch(function(t){console.log(t)})}else{var s=2;2===this.discount.discountSelectIndex?s=3:3===this.discount.discountSelectIndex&&(s=4);var i=new FormData;i.append("buyAmount",this.buyNum),i.append("type",s),i.append("tradePwd",this.safePassword),i.append("code",this.payCode),this.$http.post(this.$api+"/tradesie/buySieDiscount",i).then(function(e){e.data.success?(t.$store.dispatch("errAction",{bool:!0,msg:t.$t("buySie.text15")}),t.buyNum="",t.$store.dispatch("balanceAction")):t.$store.dispatch("errAction",{bool:!0,msg:e.data.msg})}).catch(function(t){console.log(t)})}this.verificationShow=!1,this.safePassword="",this.payCode="",this.sendBtnTimes=0}},countDown:function(){var t=this;0===this.sendBtnTimes?(this.$refs.sendMsg.innerHTML=this.$t("buySie.text17"),this.sendBtnTimes=60,this.$refs.sendMsg.style.color="rgba(201,0,16)",this.$refs.sendMsg.disabled=!1):(this.sendBtnTimes--,this.$refs.sendMsg.innerHTML=this.sendBtnTimes,this.$refs.sendMsg.disabled=!0,this.$refs.sendMsg.style.color="rgba(255,255,255,0.6)",setTimeout(function(){return t.countDown()},1e3))},sendPhoneCode:function(){var t=this,e=void 0,s=new FormData;s.append("json",o()({type:"code"})),this.$http.post(this.$api+"/user/sendSmsCode",s).then(function(s){e=s.data.success?t.$t("buySie.text16"):s.data.msg,t.$store.dispatch("errAction",{bool:!0,msg:e})}).catch(function(t){console.log(t)}),this.countDown()}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"buySie"},[i("div",{staticClass:"priceTrend"},[i("h3",{staticClass:"secret-title"},[t._v(t._s(t.$t("buySie.text1")))]),t._v(" "),i("p",{staticClass:"subtitle"},[t._v(t._s(t.$t("buySie.text2"))+"： "+t._s(t._f("fourNumber")(t.balanceData.siePrice)))]),t._v(" "),i("div",{staticClass:"kLineBox"},[i("div",{style:{width:"720px",height:"360px"},attrs:{id:"myChart"}})])]),t._v(" "),i("div",{staticClass:"buyIn"},[i("h3",{staticClass:"secret-title"},[t._v(t._s(t.$t("buySie.text3")))]),t._v(" "),i("div",{staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[i("i",[t._v("1.")]),t._v(t._s(t.$t("buySie.text4"))+"：")]),t._v(" "),i("span",[t._v(t._s(t.$t("buySie.text5"))+"："+t._s(t._f("fourNumber")(t.balanceData.siePrice))+"USD")])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.buyNum,expression:"buyNum",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"number",placeholder:t.$t("buySie.text6")},domProps:{value:t.buyNum},on:{input:[function(e){e.target.composing||(t.buyNum=e.target.value.trim())},function(e){return t.checkBuyNum()}],focus:function(e){t.buyNumTipShow=!1},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.buyNumTipShow}},[t._v(t._s(t.buyNumTip))])]),t._v(" "),i("div",{staticClass:"inputTipBox inputTipBox-select"},[i("div",{staticClass:"inputTip-title"},[i("span",[i("i",[t._v("2.")]),t._v(t._s(t.$t("buySie.text7"))+"：")])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{staticClass:"secret-input secret-input-bordernone select-input",attrs:{type:"text",readonly:"",disabled:"",placeholder:t.discount.discountValue}}),t._v(" "),i("a",{ref:"discountBtn",staticClass:"discount-btn",on:{click:function(e){t.discount.discountSelectShow=!t.discount.discountSelectShow}}},[i("i",{staticClass:"arrowDown",class:{arrowActive:t.discount.discountSelectShow}})]),t._v(" "),i("ul",{staticClass:"selectMenu",class:{selectMenuActive:t.discount.discountSelectShow}},t._l(t.discount.discountSelectList,function(e,s){return i("li",{key:e.name,class:{liActive:t.discount.discountSelectIndex===s},on:{click:function(i){return t.chooseDiscount(e.name,s)}}},[t._v(t._s(e.name))])}),0)])]),t._v(" "),i("div",{staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[i("i",[t._v("3.")]),t._v("."+t._s(t.$t("buySie.text8"))+"：")])]),t._v(" "),i("input",{staticClass:"secret-input secret-input-bordernone",attrs:{type:"text",disabled:"",readonly:"",placeholder:t._f("fourNumberUsd")(t.tradTotalPrice)}})]),t._v(" "),i("p",{staticClass:"availableBalance"},[t._v(t._s(t.$t("buySie.text9"))+"："),i("span",[t._v(t._s(t._f("fourNumber")(t.userBalanceUSD))+" USD")])]),t._v(" "),i("button",{staticClass:"secret-btn",on:{click:function(e){return t.buyFuc()}}},[t._v(t._s(t.$t("buySie.text10")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.tradePasswordShow,expression:"tradePasswordShow"}],staticClass:"myPopup"},[i("div",{staticClass:"myPopup-tip"},[i("a",{staticClass:"close-btn",on:{click:function(e){t.tradePasswordShow=!1}}},[i("img",{attrs:{src:s("KOGE"),alt:""}})]),t._v(" "),i("h3",{staticClass:"title"},[t._v(t._s(t.$t("popoup.text1")))]),t._v(" "),i("p",{staticClass:"subtitle"},[t._v(t._s(t.$t("popoup.text2")))]),t._v(" "),i("router-link",{staticClass:"secret-btn",attrs:{tag:"button",to:"/safeSetting"}},[t._v(t._s(t.$t("popoup.text3")))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.bindPhoneShow,expression:"bindPhoneShow"}],staticClass:"myPopup"},[i("div",{staticClass:"myPopup-tip"},[i("a",{staticClass:"close-btn",on:{click:function(e){t.bindPhoneShow=!1}}},[i("img",{attrs:{src:s("KOGE"),alt:""}})]),t._v(" "),i("h3",{staticClass:"title"},[t._v(t._s(t.$t("popoup.text4")))]),t._v(" "),i("router-link",{staticClass:"secret-btn",attrs:{tag:"button",to:"/bindPhone"}},[t._v(t._s(t.$t("popoup.text5")))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.verificationShow,expression:"verificationShow"}],staticClass:"myPopup verificationPopup"},[i("div",{staticClass:"myPopupBox"},[i("div",{staticClass:"verificationForm"},[i("h3",{staticClass:"secret-title"},[t._v(t._s(t.$t("popoup.text6")))]),t._v(" "),i("div",{staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text7")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.safePassword,expression:"safePassword",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"password",placeholder:t.$t("popoup.text8")},domProps:{value:t.safePassword},on:{focus:function(e){t.safePasswordTipShow=!1},input:function(e){e.target.composing||(t.safePassword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.safePasswordTipShow}},[t._v(t._s(t.$t("popoup.text8")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===t.userInfo.openGoogleCode,expression:"userInfo.openGoogleCode === 2"}],staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text9")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.payCode,expression:"payCode",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"text",placeholder:t.$t("popoup.text10")},domProps:{value:t.payCode},on:{focus:function(e){t.ggCodeTipShow=!1},input:function(e){e.target.composing||(t.payCode=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.ggCodeTipShow}},[t._v(t._s(t.$t("popoup.text10")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.userInfo.openGoogleCode&&2===t.userInfo.openMobileCode,expression:"userInfo.openGoogleCode !== 2 && userInfo.openMobileCode === 2"}],staticClass:"inputTipBox"},[i("div",{staticClass:"inputTip-title"},[i("span",[t._v(t._s(t.$t("popoup.text11")))])]),t._v(" "),i("div",{staticClass:"inputTipDiv"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.payCode,expression:"payCode",modifiers:{trim:!0}}],staticClass:"secret-inputTip secret-input",attrs:{type:"password",placeholder:t.$t("popoup.text12")},domProps:{value:t.payCode},on:{focus:function(e){t.phoneCodeTipShow=!1},input:function(e){e.target.composing||(t.payCode=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),i("button",{ref:"sendMsg",staticClass:"secret-btn",on:{click:function(e){return t.sendPhoneCode()}}},[t._v(t._s(t.$t("popoup.text13")))])]),t._v(" "),i("span",{staticClass:"inputTipMsg",class:{inputTipMsgActive:t.phoneCodeTipShow}},[t._v(t._s(t.$t("popoup.text12")))])])]),t._v(" "),i("div",{staticClass:"popupBtn"},[i("button",{staticClass:"secret-btn",on:{click:function(e){t.verificationShow=!1}}},[t._v(t._s(t.$t("popoup.text14")))]),t._v(" "),i("button",{staticClass:"secret-btn",on:{click:function(e){return t.confirmBuy()}}},[t._v(t._s(t.$t("popoup.text15")))])])])])])},staticRenderFns:[]};var l=s("VU/8")(d,p,!1,function(t){s("aTbP")},"data-v-60373464",null);e.default=l.exports},aTbP:function(t,e){}});